---
// src/components/common/NewsletterBanner.astro
import { type Locale } from '../../i18n/i18n';

export interface Props {
  currentLang?: Locale;
  id?: string; 
  items?: any[];
}

const { currentLang, id, items } = Astro.props;

const content = {
  es: {
    bannerTitle: 'Tu nuevo sabor favorito: Zambos Ajo Parmesano',
    bannerSubtitle: 'Con la combinación perfecta de sabores que necesitas. Pruébalo ya',
    title: 'ÚNETE A NUESTRO BOLETÍN',
    subtitle: 'Entérate de nuestras últimas novedades en experiencias, sabores y más.',
    placeholder: 'Correo electrónico',
    button: 'Suscríbete'
  },
  en: {
    bannerTitle: 'Your new favorite flavor: Zambos Garlic Parmesan',
    bannerSubtitle: 'With the perfect combination of flavors you need. Try it now',
    title: 'JOIN OUR NEWSLETTER',
    subtitle: 'Stay informed about our latest news on experiences, flavors and more.',
    placeholder: 'Email address',
    button: 'Subscribe'
  }
};

const t = content[currentLang || 'es'];
---

<div class="w-full">
  <!-- Banner with Image -->
  <div class="relative w-full rounded-2xl overflow-hidden">
    <div class="w-full h-[400px] relative">
      <video 
        src="/images/en/video.mp4"
        class="w-full h-full object-cover blur-sm"
      />
      <div class="absolute inset-0 bg-black/20"></div>
    </div>
    
    <!-- Red Banner at Bottom -->
    <div class="absolute bottom-0 left-0 right-0 bg-red px-6 py-4">
      <p class="text-white font-bold text-sm md:text-base">{t.bannerTitle}</p>
      <p class="text-white text-xs md:text-sm">{t.bannerSubtitle}</p>
    </div>
  </div>

  <!-- Green Newsletter Section -->
  <div class="bg-[#009337] text-center py-10 px-6 rounded-[40px] mt-[30px]">
    <h2 class="text-white text-2xl md:text-3xl font-bold mb-3 uppercase tracking-wider">
      {t.title}
    </h2>
    <p class="text-white text-sm md:text-base mb-6 max-w-xl mx-auto">
      {t.subtitle}
    </p>
    
    <form class="flex flex-col sm:flex-row gap-3 items-center justify-center max-w-md mx-auto">
      <input 
        type="email" 
        placeholder={t.placeholder}
        required
        class="w-full sm:flex-1 px-4 py-3 rounded-full bg-[#0DB04A] text-white placeholder-white"
      />
      <button 
        type="submit"
        class="w-full sm:w-auto px-6 py-3 bg-red hover:bg-red-700 text-white font-bold rounded-full transition-colors"
      >
        {t.button}
      </button>
    </form>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.querySelector('.bg-primary form');
    form?.addEventListener('submit', (e) => {
      e.preventDefault();
      const input = form.querySelector('input[type="email"]') as HTMLInputElement;
      if (input?.value) {
        alert('¡Gracias por suscribirte!');
        input.value = '';
      }
    });
  });
</script>