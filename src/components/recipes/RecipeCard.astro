---
import LazyImage from '../common/LazyImage.astro';
import { getLocale } from '../../i18n/i18n';

interface Props {
  image: string;
  title: string;
  time?: string;
  id: string;
  description?: string;
  category?: string;
  isNew?: boolean;
}

const { 
  image, 
  title, 
  time = "30MIN", 
  id,
  description = '',
  category = 'breakfast',
  isNew = false
} = Astro.props;

const currentLocale = getLocale();
const recipeLink = `/${currentLocale}/${currentLocale === 'es' ? 'recetas' : 'recipes'}/${id}`;
---

<a 
  href={recipeLink} 
  class="block group h-full w-full"
>
  <div class="overflow-hidden rounded-3xl transition-transform duration-300 hover:scale-[1.02] h-full flex flex-col w-full">
    <!-- Imagen -->
    <div class="relative h-[160px] sm:h-[180px] md:h-[250px] overflow-hidden">
      <LazyImage
        src={image}
        alt={title}
        class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
      />
    </div>
    
    <!-- SecciÃ³n info -->
    <div class={`p-3 md:p-6 flex flex-col flex-1 ${currentLocale !== 'es' ? 'bg-us-green' : 'bg-[#FFED7A]'}`}>
      <!-- Category Tags -->
      <div class="flex gap-2 mb-2 md:mb-3">
        <span class={`inline-block px-3 py-1 md:px-4 md:py-2 font-bold rounded-full text-xs uppercase text-white ${currentLocale !== 'es' ? 'bg-us-red' : 'bg-[#0DB04A]'}`}>
          {category}
        </span>
        <!-- Tag NUEVO -->
        {isNew && (
          <span class="inline-block px-3 py-1 md:px-4 md:py-2 bg-red text-white font-bold rounded-full text-xs uppercase">
            {currentLocale === 'es' ? 'NUEVO' : 'NEW'}
          </span>
        )}
      </div>
      
      <!-- Title -->
      <h3 class={`font-bold text-base leading-tight sm:text-lg md:text-xl lg:text-2xl uppercase line-clamp-3 md:line-clamp-2 ${currentLocale !== 'es' ? 'text-white' : 'text-gray-900'}`}>
        {title}
      </h3>
      
      <!-- Description - Solo visible en tablet+ -->
      <p class={`hidden md:block text-sm leading-tight mt-2 line-clamp-2 ${currentLocale !== 'es' ? 'text-white/80' : 'text-gray-900'}`}>
        {description || (currentLocale === 'es' ? 'Deliciosa receta cargada de sabor perfecta para compartir en familia.' : 'Delicious recipe full of flavor perfect for sharing with family.')}
      </p>
    </div>
  </div>
</a>